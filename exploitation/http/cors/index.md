# Cross-origin resource sharing (CORS)
## What is CORS
Cross-origin resource sharing (CORS) is a browser mechanism which enables controlled access to resources located outside of a given domain. It extends and adds flexibility to the same-origin policy (SOP). However, it also provides potential for cross-domain attacks, if a website's CORS policy is poorly configured and implemented. CORS is not a protection against cross-orogin attacks such as cross-site request forgery (CSRF). 

## Same-origin policy
The same-origin policy is a restrictive cross-origin specification that limits the ability for a website to interact with resources outside of the source domain. The same-origin policy was defined mmany years ago in response to potentially malicious cross-domain interactions, such as one website stealing private data from another. It generally allows a domain to issue request to other domains, but not to access the responses. 

## Relaxation of the same-origin policy
The same-origin policy is very restrictive and consequently various approaches have been devised to circumvent the constraints. Many websites interact with subdomains or third-party sites in a way that requires full cross-origin access. A controlled relaxation of the same-origin policy is possible using cross-origin resources sharing (CORS). The cross-origin resource sharing protocol uses a suite of HTTP headers that define trusted web origins and associated properties such as whether authenticated access is permitted. These are combined in a header exchange between a browser and the vross-origin web site that it is trying to access. 

## CORS and the Access-Control-Allow-Origin response header
In this section we explain what the Access-Control-Allow-Origin header is in respect to CORS, and how it forms part of CORS implementation. 

The cross-origin resource sharing specification provides controlled relaxtion of the same-origin policy for HTTP requests to one website domain from another through the use of a collection of HTTP headers. Browsers permit access to responses to cross-origin request based upon these header instructions. 

## What is the Access-Control-Allow-Origin response header? 
The Access-Control-Allow-Origin header is included in the response from one website to a request originating from another websitek, and identifies the permitted origin of the request. A web browser compares the Access-Control-Allow-Origin with the requesting website's origin and permits acces to the response if they match. 

## Implementing simple cross-origin resource sharing
The cross-origin resource sharing (CORS) specificationo prescribes header content exchanged between web servers and browsers that restricts origins for web resource requests outside of the origin domain. The CORS specification identifies a collection of protocol headers of which Access-Control-Allow-Origin is the most significant. This header is returned by a server when a website request a cross-domain resource, with an Oriogin header added by the browser. 

For example, suppose a webnsite with origin normal-website.com causes the following cross-domain request: 


GET /data HTTP/1.1
Host: robust-website.com
Origin : https://normal-website.com

The server on robust-website.com returns the following response:

HTTP/1.1 200 OK
...
Access-Control-Allow-Origin: https://normal-website.com 

The browser will allow the code running on normal-website.com to access the response because the origins match. 

The specification of Access-Control-Allow-Origin allows for multiple origins, or the value null, or the wildcard *. However, no browser supports multiple origins and there are restrictions on the use of the wildcard *. 

## Handling cross-origin resource requests with credentials
The deault behaviour of cross-origin resource requests is for requests to be passed without credentials like cookies and the Authorization header. However, the cross-domain server can permit reading of the response when credentials are passed to it by settings the CORS Access-Control-Allow-Credentials header to true. Now if the requesting website uses JavaScript to declare that it is sending cookies with the request: 

GET /data HTTP/1.1
Host: robust-website.com
...
Origin: https://normal-website.com
Cookie: JSESSIONID=<value>

And the response to the request is:

HTTP/1.1 200 OK
...
Access-Control-Allow-Origin: https://normal-website.com
Access-Control-Allow-Credentials: true 

Then the browser will permit the requesting website to read the response, because the Access-Control-Allow-Credentials response header is set to true. Otherwise, the browser will not allow access to the response. 

## Relaxtion of CORS specifications with wildcards
The header Access-Control-Allow-Origin supports wildcards. For example: 

Access-Control-Allow-Origin: * 

Note that wildcards cannot be used within any other value. For example, the following header is not valid: 

Access-Control-Allow-Origin: https://*.normal-website.com 
