# Photographer

**IP Address:** 192.168

## Enumeration
### Open Ports
| Port #| Service | Details  |
|:------|:---------|:---------|
| 22    | ssh      | OpenSSH 7.2p2 Ubuntu 4ubuntu2.10 (Ubuntu Linux; protocol 2.0) |
| 80    | http     | Apache httpd 2.4.18 ((Ubuntu)) |
| 139   | smb      | Samba smbd 3.X - 4.X (workgroup: WORKGROUP) | 
| 445   | smb      | Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP) | 
| 8000  | http     | Apache httpd 2.4.18 ((Ubuntu)) |


## Exploitation
### Exploit Details (SearchSploit)
* **Name** - Koken CMS 0.22.24 - Arbitrary File Upload (Authenticated) 
* **CVE** - N/A
* **Module** - php/webapps/48706.txt
* **Disclosed** - 2020-07-26 
* **References**
  * https://www.exploit-db.com/exploits/48706

Potential credentials were found on an SMB share (daisa@photographer.com:babygirl). These credentials were found to work with the admin console for the koken server (http://192.168.76.76:8000/admin/). 

1. Login to the admin console with the found credentials
![Execute Exploit](images/exploit1.png)

## Privilege Escalation
### Exploit Details
* **Name** - SUID (php) 
* **CVE** - N/A
* **Module** - 
* **Disclosed** - 
* **References**
  * https://gtfobins.github.io/gtfobins/php/

Commands
```
CMD="/bin/sh"
/usr/bin/php7.2 -r "pcntl_exec('/bin/sh', ['-p']);"
whoami
cat /root/proof.txt
ifconfig
```
![Execute Exploit](images/privesc1.png)