# DNS

## Setup
Set Variable when domain is known
`export domain=test.com`

##  General Commands
| Info | Command | 
|:-----|:--------|
| Banner Grab | `dig version.bind CHAOS TXT @$ip` |
| Try zone transfer without domain | `dig axfr @$ip` |
| Try zone transfer guessing the domain | `dig axfr @$ip $domain` |
| Regular DNS request | `dig ANY @$ip $domain` |
| Regular DNS request | `dig A @$ip $domain` |
| IPv6 DNS request | `dig AAAA @$ip $domain` | 
| Get TXT Records | `dig TXT @$ip $domain` |
| Get MX Records | `dig MX @$ip $domain` |
| DNS that resolves that name | `dig NS @$ip $domain` |
| Reverse lookup | `dig -x 192.168.0.2 @$ip` |
| reverse IPv6 lookup | `dig -x 2a00:1450:400c:c06::93 @$ip` |

# Metasploit Modules & nmap scripts
| Info | Module / Script |
|:-----|:----------------|
| Perform enumeration actions | `auxiliary/gather/enum_dns #Perform enumeration actions` |
| Perform enumeration actions | `nmap -n --script "(default and *dns*) or fcrdns or dns-srv-enum or dns-random-txid or dns-random-srcport" $ip` |

# DNSRecon
| Info | Command |
|:-----|:--------|
| DNS reverse of all of the addresses | `dnsrecon -r 127.0.0.0/24 -n $ip`
| DNS reverse of all of the addresses | `dnsrecon -r 127.0.1.0/24 -n $ip`
| DNS reverse of all of the addresses | `dnsrecon -r $ip/24 -n $ip`
| Zone transfer | `dnsrecon -d $domain -a -n $ip ` |

# Check for a host that exists
host $dns
# Get DNS Servers
host -t ns megacorpone.com
# Get Mail Servers
host -t mx megacorpone.com
# Zone Transfer
host -l $dns $dnsserveraddress
# dnsenum
dnsenum $dns
# dnsrecon
root@kali:~# dnsrecon -d $dns -t axfr
# Reverse Lookup bruteforce
for ip in $(seq 155 190);do host 50.7.67.$ip;done |grep -v "not found"
# Check for subdomains
gobuster vhost -u cronos.htb -w /usr/share/dirb/wordlists/big.txt